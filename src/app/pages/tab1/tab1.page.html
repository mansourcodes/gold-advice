<ion-header [translucent]="true" class="ion-no-border">
  <ion-toolbar color="tertiary">
    <!-- <ion-buttons slot="start">
      <ion-menu-button></ion-menu-button>
    </ion-buttons> -->
    <ion-buttons slot="end">
      <ion-button routerLink="/help">
        ุงููุณุงุนุฏุฉ
        <ion-icon name="logo-youtube" class="ion-padding-start"></ion-icon>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
  <form [formGroup]="form">
    <div class="bgdark ion-padding-vertical ion-margin-bottom">
      <ion-grid class="ion-padding-vertical">
        <ion-row class="ion-text-center">
          <ion-col size="6">
            <div class="faceframe">
              <ion-img
                class="reaction-image"
                [src]="'assets/reactions/actions_'+advice?.key+'.svg'"
              ></ion-img>
            </div>
          </ion-col>
          <ion-col size="6" color="light">
            <p class="ion-no-margin">ุญุณุจ ุฑุฃูู</p>

            <h1 class="ion-no-margin" color="primary">{{advice?.label}}</h1>
            <p *ngIf="workmanshipPrice > 0" class="ion-no-margin">
              ูุฃู ุงููุตูุนูุฉ {{workmanshipPrice | number:decimal()}}
              {{currentCurrency.label}}
            </p>
            <p *ngIf="workmanshipPrice <= 0" class="ion-no-margin">
              ูุฃู ุงููุตูุนูุฉ ุชุญุช ุงูุตูุฑ
            </p>
            <p class="ion-no-margin">{{advice?.action}}</p>
          </ion-col>
        </ion-row>
      </ion-grid>
      <ion-button class="bgdarkbutton" color="primary" routerLink="/faq">
        <ion-text color="light">
          <ion-icon name="diamond-outline"></ion-icon>
          ุงููุฒูุฏ
        </ion-text>
      </ion-button>
      <ion-button class="resetFormButton" color="light" (click)="resetForm()">
        <ion-icon size="large" name="refresh-circle-outline"></ion-icon>
      </ion-button>
    </div>

    <div class="ion-padding-horizontal ion-margin-bottom">
      <mat-form-field appearance="fill" class="w-50">
        <mat-label>ุงููุฒู </mat-label>
        <input type="number" matInput formControlName="weight" />
        <span matSuffix>ูุฑุงู</span>
      </mat-form-field>
      <mat-form-field appearance="fill" class="w-50 ion-padding-start">
        <mat-label> ุณุนุฑ ุงูุจูุน (ุดุงูู ุงูุถุฑูุจุฉ)</mat-label>
        <input type="number" matInput formControlName="price" />

        <mat-icon matSuffix>
          <ion-icon name="cash-outline"></ion-icon>
        </mat-icon>
      </mat-form-field>

      <p class="ion-text-center ion-padding-bottom">
        <mat-form-field floatLabel="always" appearance="fill" class="w-40">
          <mat-label>ุณุนุฑ ุงูุฐูุจ ููุฑุงุท 24</mat-label>
          <input
            type="number"
            matInput
            value="19.5"
            formControlName="marketูprice"
          />
          <mat-icon matSuffix>
            <ion-icon name="globe-outline"></ion-icon>
          </mat-icon>
          <mat-hint>
            <a (click)="searchMarketPriceStringUrl()" href="#">
              <ion-icon name="exit-outline"></ion-icon>
              ุณุนุฑ ุงูุฐูุจ ูู ุงูุณูู ููุฑุงุท 24
            </a>
          </mat-hint>
        </mat-form-field>
        <mat-form-field appearance="fill" class="w-30 ion-padding-start">
          <mat-label>ุงูููุฑุงุท</mat-label>
          <mat-select formControlName="carat">
            <mat-option *ngFor="let pure of pureList" [value]="pure">
              {{pure}}
            </mat-option>
          </mat-select>
          <mat-hint> ููุน ููุฑุงุท ุงูุตูุบุฉ </mat-hint>
        </mat-form-field>
        <mat-form-field appearance="fill" class="w-30 ion-padding-start">
          <mat-label>ุณุนุฑ ุงูููุฑุงุท {{form.value['carat']}} </mat-label>
          <input matInput [value]="caratGlobalPrice" />
          <mat-hint> ููู ุงูุบุฑุงู </mat-hint>
        </mat-form-field>
      </p>
    </div>

    <mat-expansion-panel class="mat-elevation-z ion-margin-top">
      <mat-expansion-panel-header>
        <mat-panel-title> ุชุญูู ุงูุซุฑ </mat-panel-title>
      </mat-expansion-panel-header>

      <p>
        <mat-form-field appearance="fill" class="w-25">
          <mat-label>ุงูุถุฑูุจุฉ</mat-label>
          <input type="number" matInput formControlName="vat" />
          <span matSuffix>%</span>
        </mat-form-field>

        <mat-form-field appearance="fill" class="w-75 ion-padding-start">
          <mat-label>ุงูุนููุฉ</mat-label>
          <mat-select formControlName="currency">
            <mat-option
              *ngFor="let currency of currencyList"
              [value]="currency.key"
            >
              {{currency.label}} ({{currency.key}})
            </mat-option>
          </mat-select>
        </mat-form-field>
      </p>

      <ion-list>
        <ion-item lines="full">
          <ion-label> ูุณุจุฉ ุงููุงุฆุฏุฉ ููุจุงุฆุน </ion-label>
          {{benefitPersantage | number:'0.0-2'}} ูช
        </ion-item>
        <ion-item lines="full">
          <ion-label> ุงููุตูุนูุฉ </ion-label>
          {{workmanshipPrice | number:decimal()}}
        </ion-item>
        <ion-item lines="full">
          <ion-label> ุณุนุฑ ุจูุน ุงููุฑุงู </ion-label>
          {{priceOfOneGram | number:decimal()}}
        </ion-item>
        <ion-item lines="full">
          <ion-label> ุงูุณุนุฑ ุจุฏูู ุถุฑูุจุฉ </ion-label>
          {{priceWithoutVAT | number:decimal()}}
        </ion-item>
        <ion-item lines="full">
          <ion-label> ูุณุจุฉ ุงูุฐูุจ ูู ุงูููุฑุงุท {{form.value['carat']}} </ion-label>
          {{carat_persentage*100 | number:'0.0-3'}} ูช
        </ion-item>
      </ion-list>

      <div class="ion-text-center ion-padding">
        <div *ngIf="form.value['soundON']" (click)="toggleSoundOn()">
          <ion-icon size="large" name="volume-medium-outline"></ion-icon>
        </div>
        <div *ngIf="!form.value['soundON']" (click)="toggleSoundOn()">
          <ion-icon size="large" name="volume-mute-outline"></ion-icon>
        </div>
      </div>
    </mat-expansion-panel>

    <ion-card
      *ngIf="page_is_loaded && !(form.value['welcome_card_hide'] || form.value['welcome_card_hide_forever'])"
      class="welcome-card"
    >
      <ion-img src="assets/welcome.svg"></ion-img>

      <ion-card-header>
        <ion-card-title>ูุฑุญุจุข ๐</ion-card-title>
      </ion-card-header>
      <ion-card-content>
        <p class="ion-text-justify">
          ุดูุฑุง ุฌุฒููุง ููุตููู ุฅูู ููุง!๐ ุฃุชููู ุงู ูููู ุงูุชุทุจูู ูููุฏ ููู. ุนูุฏ
          ุฅุณุชูุงุฏุชู ูุง ุชูุณู ุฃู ุชุฎุจุฑ ุฃุตุฏูุงุฆู ๐
        </p>
        <p class="ion-text-center">
          <ion-button
            color="tertiary"
            fill="outline"
            (click)="openUrl('https://www.instagram.com/_mansourcodes_/')"
          >
            <ion-icon name="logo-instagram"></ion-icon>
          </ion-button>
          <ion-button
            color="tertiary"
            fill="outline"
            (click)="openUrl('https://twitter.com/_mansourcodes_')"
          >
            <ion-icon name="logo-twitter"></ion-icon>
          </ion-button>
          <ion-button
            color="tertiary"
            fill="outline"
            (click)="openUrl('https://github.com/mansourcodes')"
          >
            <ion-icon name="logo-github"></ion-icon>
          </ion-button>
        </p>
      </ion-card-content>

      <ion-item lines="full">
        <ion-label>ูุง ุชุธูุฑ ูุฐู ุงูุฑุณุงูุฉ ูุงุญูุข.</ion-label>
        <ion-checkbox
          slot="start"
          formControlName="welcome_card_checkbox"
        ></ion-checkbox>
        <ion-button slot="end" color="tertiary" (click)="hideWelcomeCard()">
          ุฅุบูุงู
        </ion-button>
      </ion-item>
      <!-- <div class="ion-text-end ion-padding">
      <ion-button color="tertiary"> ุฅุบูุงู </ion-button>
    </div> -->
    </ion-card>

    <ion-backdrop
      (click)="hideWelcomeCard()"
      *ngIf="page_is_loaded &&  !(form.value['welcome_card_hide'] || form.value['welcome_card_hide_forever'])"
    ></ion-backdrop>
  </form>
</ion-content>
